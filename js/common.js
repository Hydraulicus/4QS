'use strict';

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function initAnimation(obj) {
    [].concat(_toConsumableArray(obj.target)).forEach(function (el) {
        elementRender({ target: el });
    });

    //    for (var i = 0; i < obj.target.length; i++) {
    //        elementRender({ target :obj.target[i] });
    //    }
}

function elementRender(obj) {
    var animTime = 200;
    var output = Snap(obj.target);
    output.attr({ "viewBox": "0 -30 222 320", "shape-rendering": "auto" });

    var contours = {
        "normal": "M162.7,188.1L162.7,188.1c0,2.8-2,5.1-4.8,5.1 c-2.9,0-4.9-2.3-4.9-5.1v0c0-2.8,2-5.1,4.8-5.1C160.7,183,162.7,185.3,162.7,188.1z M234,138.4L234,138.4c0,1,0,2,0,3 c0,60.5-49,109.5-109.5,109.5S15,201.9,15,141.4C15,80.9,64.1,31.9,124.6,31.9c22.3,0,84.8,0,109.4-0.1V138.4z M56.7,120.7 c1.5,11.8,7.7,22.4,17.1,29.7c4.6,3.5,9.8,6.2,15.4,7.7c5.8,1.6,11.8,2,17.7,1.3c6.1-0.8,11.9-2.8,17.1-5.9l0,0l0,0 c0.3-0.2,0.6-0.3,0.9-0.3c0.4,0,0.8,0.2,1.1,0.4l0,0l5.9,5l1.4,1c0.6,0.3,1.2,0.4,1.8,0.4c2.5,0,4.5-2,4.5-4.5c0-1-0.3-1.9-0.9-2.7 c-0.3-0.3-0.5-0.6-0.8-0.8l-10.4-8.9l-0.4-0.2c-0.8-0.4-1.6-0.6-2.5-0.6c-1,0-2,0.3-2.9,0.8l0,0l0,0c-0.2,0.1-0.3,0.2-0.5,0.3 c-1.1,0.7-2.1,1.4-3.2,2l-0.2,0.1c-3.8,2.1-8,3.4-12.3,4c-4.6,0.6-9.3,0.3-13.8-1c-4.3-1.2-8.4-3.3-12-6 c-7.3-5.7-12.1-13.9-13.3-23.2c-0.6-4.6-0.3-9.3,1-13.8c1.2-4.3,3.3-8.4,6-12c5.7-7.4,13.9-12.1,23.2-13.3c4.6-0.6,9.3-0.3,13.8,1 c4.3,1.2,8.4,3.3,12,6c7.4,5.7,12.1,13.9,13.3,23.2c0.4,3.2,0.4,6.4-0.1,9.5l0,0.1l-0.3,2c-0.4,2.7,1.5,5.2,4.2,5.6 c2.7,0.4,5.2-1.5,5.6-4.2l0.3-1.9c0.1-0.4,0.1-0.9,0.2-1.3c0.4-3.7,0.4-7.4,0-11.1c-1.5-11.8-7.7-22.4-17.1-29.7 c-4.6-3.5-9.8-6.2-15.4-7.7c-5.8-1.6-11.8-2-17.7-1.3C83.6,72,72.9,78.2,65.7,87.6c-3.5,4.6-6.2,9.8-7.7,15.4 C56.3,108.8,55.9,114.8,56.7,120.7z M75.9,188.1c0-4-3.1-7.4-7.5-7.4c-4.4,0-7.5,3.4-7.5,7.4v0c0,4,3.1,7.4,7.5,7.4 c1.7,0,3.2-0.5,4.4-1.4l1,0.9c0.2,0.2,0.5,0.4,0.9,0.4c0.7,0,1.2-0.6,1.2-1.2c0-0.4-0.2-0.7-0.5-1l-0.9-0.8 C75.4,191.3,75.9,189.8,75.9,188.1L75.9,188.1z M91,182.1c0-0.7-0.6-1.3-1.3-1.3c-0.7,0-1.3,0.6-1.3,1.3v7.1c0,2.6-1.4,4-3.6,4 c-2.3,0-3.6-1.4-3.6-4.1v-7c0-0.7-0.6-1.3-1.3-1.3c-0.7,0-1.3,0.6-1.3,1.3v7.1c0,4.2,2.4,6.3,6.1,6.3c3.8,0,6.2-2.2,6.2-6.5V182.1z  M107.3,194.2c0-0.2,0-0.3-0.1-0.5l-5.3-11.9c-0.3-0.6-0.8-1-1.5-1h-0.1c-0.7,0-1.2,0.4-1.5,1l-5.3,11.9c-0.1,0.2-0.2,0.4-0.2,0.6 c0,0.7,0.5,1.2,1.2,1.2c0.5,0,1-0.3,1.2-0.8l1.2-2.8h7l1.2,2.7c0.2,0.5,0.6,0.9,1.2,0.9C106.8,195.4,107.3,194.9,107.3,194.2z  M121.8,185.5c0-1.3-0.4-2.3-1.2-3.1c-0.9-0.9-2.3-1.4-4.1-1.4h-5.1c-0.7,0-1.3,0.6-1.3,1.3v12c0,0.7,0.6,1.3,1.3,1.3 c0.7,0,1.3-0.6,1.3-1.3v-3.9h3.2l3.5,4.5c0.3,0.4,0.7,0.7,1.2,0.7c0.6,0,1.2-0.5,1.2-1.2c0-0.4-0.2-0.7-0.4-1l-2.8-3.5 C120.4,189.2,121.8,187.8,121.8,185.5L121.8,185.5z M135.6,182.1c0-0.6-0.5-1.2-1.2-1.2h-9.6c-0.7,0-1.2,0.5-1.2,1.2 c0,0.6,0.5,1.2,1.2,1.2h3.5v10.9c0,0.7,0.6,1.3,1.3,1.3c0.7,0,1.3-0.6,1.3-1.3v-10.9h3.5C135,183.3,135.6,182.8,135.6,182.1z  M148,191.2c0-2.4-1.6-3.5-4.6-4.2c-2.8-0.7-3.4-1.2-3.4-2.3v0c0-0.9,0.9-1.7,2.3-1.7c1.1,0,2.2,0.4,3.3,1.1 c0.2,0.1,0.4,0.2,0.7,0.2c0.7,0,1.2-0.5,1.2-1.2c0-0.5-0.3-0.8-0.6-1c-1.3-0.9-2.8-1.3-4.6-1.3c-2.9,0-4.9,1.7-4.9,4.2v0 c0,2.7,1.7,3.6,4.8,4.3c2.7,0.6,3.2,1.2,3.2,2.2v0c0,1.1-1,1.8-2.5,1.8c-1.6,0-2.8-0.5-4-1.5c-0.2-0.1-0.4-0.2-0.7-0.2 c-0.7,0-1.2,0.5-1.2,1.2c0,0.4,0.2,0.8,0.5,1c1.6,1.2,3.5,1.8,5.4,1.8C145.9,195.5,148,193.9,148,191.2L148,191.2z M148.6,154.1 l2.3,1.7c4.2,3.1,9.2,4.2,14.4,4.2c6.7,0,12.6-2.3,17.4-7c4.6-4.5,7.2-10,7.2-16.5c0-4.7-1.7-9.1-4.2-13.1 c-1.6-2.5-3.8-4.8-5.9-6.9c-2.9-2.8-6.1-5.3-9.3-7.7c-2.5-1.8-4.9-3.6-7.3-5.5c-0.8-0.6-1.5-1.2-2.2-1.8c-0.4-0.3-0.9-0.7-1.3-1.1 c-1.5-1.5-3.1-3.4-4.1-5.4c-0.7-1.6-1.1-3.3-1.1-5.1c0-2.8,1-5.2,3-7.1c2.2-2.1,4.9-2.9,7.9-2.9c2.5,0,4.8,0.6,7,1.9 c0.5,0.3,1,0.7,1.5,1l0.1,0.1l6,4.9l0.2,0.1c0.7,0.3,1.4,0.5,2.1,0.5c2.8,0,5-2.2,5-5c0-1.1-0.4-2.2-1.1-3.1l0-0.1l-0.4-0.5 c-0.1-0.1-0.3-0.2-0.4-0.3l-5.6-4.9l0,0c-0.8-0.7-1.7-1.3-2.6-1.8c-3.6-2-7.4-3-11.5-3c-3.8,0-7.4,0.9-10.7,2.7 c-3.2,1.8-5.8,4.2-7.7,7.4c-1.9,3.2-2.7,6.7-2.7,10.4c0,4.9,1.6,9.4,4.6,13.3c0.5,0.8,1.2,1.5,1.9,2.1c0.9,0.9,1.9,1.8,2.8,2.6 c2.8,2.4,5.7,4.7,8.6,6.9c3,2.3,6,4.7,8.8,7.3c2,1.8,4,3.9,5.5,6.1c1.7,2.4,2.8,5,2.8,7.9c0,2.4-0.6,4.6-1.9,6.7 c-1.3,2.2-3.2,3.9-5.4,5.1c-2.4,1.3-5,1.9-7.7,1.9c-3.9,0-7.3-1.8-10.2-4.1l-14.4-11.9l-2.4-2c-0.7-0.5-1.6-0.8-2.5-0.8 c-2.5,0-4.5,2-4.5,4.5c0,1,0.3,1.9,0.9,2.7c0.4,0.5,0.8,0.9,1.3,1.3L148.6,154.1z M165.4,188.1c0-4-3.1-7.4-7.5-7.4 c-4.4,0-7.5,3.4-7.5,7.4v0c0,4,3.1,7.4,7.5,7.4C162.2,195.6,165.4,192.2,165.4,188.1L165.4,188.1z M179.2,182.1 c0-0.6-0.5-1.2-1.2-1.2h-8.4c-0.7,0-1.3,0.6-1.3,1.3v12c0,0.7,0.6,1.3,1.3,1.3c0.7,0,1.3-0.6,1.3-1.3v-4.7h6.2 c0.6,0,1.2-0.5,1.2-1.2c0-0.6-0.5-1.2-1.2-1.2H171v-3.9h7.1C178.7,183.2,179.2,182.7,179.2,182.1z M192.7,182.1 c0-0.6-0.5-1.2-1.2-1.2h-9.6c-0.7,0-1.2,0.5-1.2,1.2c0,0.6,0.5,1.2,1.2,1.2h3.5v10.9c0,0.7,0.6,1.3,1.3,1.3c0.7,0,1.3-0.6,1.3-1.3 v-10.9h3.5C192.1,183.3,192.7,182.8,192.7,182.1z M116.2,183.2h-3.7v4.8h3.7c1.8,0,3-0.9,3-2.4v0 C119.2,184.1,118.1,183.2,116.2,183.2z M97.7,189.6h5.1l-2.5-5.8L97.7,189.6z M68.4,183c-2.9,0-4.8,2.3-4.8,5.1v0 c0,2.8,2,5.1,4.9,5.1c0.9,0,1.8-0.2,2.5-0.7l-1.8-1.5c-0.3-0.2-0.5-0.6-0.5-1c0-0.7,0.5-1.2,1.2-1.2c0.4,0,0.6,0.1,0.9,0.4l1.8,1.7 c0.5-0.8,0.7-1.7,0.7-2.7v0C73.3,185.3,71.2,183,68.4,183z",
        "up": "M162.7,171.8L162.7,171.8c0,3-2,5.4-4.8,5.4 c-2.9,0-4.9-2.5-4.9-5.4v0c0-3,2-5.4,4.8-5.4C160.7,166.4,162.7,168.8,162.7,171.8z M234,118.6L234,118.6c0,1.1,0,2.2,0,3.2 c0,64.6-49,117-109.5,117S15,186.5,15,121.9C15,57.3,64.1,4.9,124.6,4.9c22.3,0,82.4,17.9,109.4,26.9V118.6z M56.7,99.8 c1.5,12.6,7.7,24,17.1,31.7c4.6,3.8,9.8,6.6,15.4,8.2c5.8,1.7,11.8,2.2,17.7,1.4c6.1-0.8,11.9-3,17.1-6.3l0,0l0,0 c0.3-0.2,0.6-0.3,0.9-0.3c0.4,0,0.8,0.2,1.1,0.5l0,0l5.9,5.3l1.4,1.1c0.6,0.3,1.2,0.4,1.8,0.4c2.5,0,4.5-2.1,4.5-4.8 c0-1.1-0.3-2.1-0.9-2.9c-0.3-0.3-0.5-0.6-0.8-0.9l-10.4-9.5l-0.4-0.3c-0.8-0.4-1.6-0.6-2.5-0.6c-1,0-2,0.3-2.9,0.9l0,0l0,0 c-0.2,0.1-0.3,0.2-0.5,0.4c-1.1,0.7-2.1,1.5-3.2,2.2l-0.2,0.1c-3.8,2.2-8,3.7-12.3,4.3c-4.6,0.6-9.3,0.3-13.8-1.1 c-4.3-1.3-8.4-3.5-12-6.4c-7.3-6.1-12.1-14.9-13.3-24.7c-0.6-4.9-0.3-10,1-14.8c1.2-4.6,3.3-9,6-12.8c5.7-7.9,13.9-13,23.2-14.2 c4.6-0.6,9.3-0.3,13.8,1.1c4.3,1.3,8.4,3.5,12,6.4c7.4,6.1,12.1,14.9,13.3,24.7c0.4,3.4,0.4,6.8-0.1,10.2l0,0.1l-0.3,2.1 c-0.4,2.9,1.5,5.6,4.2,6c2.7,0.4,5.2-1.6,5.6-4.5l0.3-2c0.1-0.4,0.1-0.9,0.2-1.3c0.4-3.9,0.4-7.9,0-11.8 c-1.5-12.6-7.7-24-17.1-31.8c-4.6-3.8-9.8-6.6-15.4-8.2c-5.8-1.7-11.8-2.2-17.7-1.4c-11.8,1.6-22.4,8.2-29.7,18.3 c-3.5,4.9-6.2,10.5-7.7,16.4C56.3,87,55.9,93.4,56.7,99.8z M75.9,171.8c0-4.3-3.1-7.9-7.5-7.9c-4.4,0-7.5,3.6-7.5,7.9v0 c0,4.3,3.1,7.9,7.5,7.9c1.7,0,3.2-0.5,4.4-1.5l1,1c0.2,0.2,0.5,0.4,0.9,0.4c0.7,0,1.2-0.6,1.2-1.3c0-0.5-0.2-0.8-0.5-1.1l-0.9-0.8 C75.4,175.2,75.9,173.6,75.9,171.8L75.9,171.8z M91,165.4c0-0.7-0.6-1.3-1.3-1.3c-0.7,0-1.3,0.6-1.3,1.3v7.6c0,2.8-1.4,4.3-3.6,4.3 c-2.3,0-3.6-1.5-3.6-4.4v-7.5c0-0.7-0.6-1.3-1.3-1.3c-0.7,0-1.3,0.6-1.3,1.3v7.6c0,4.5,2.4,6.8,6.1,6.8c3.8,0,6.2-2.3,6.2-6.9 V165.4z M107.3,178.3c0-0.2,0-0.4-0.1-0.6l-5.3-12.7c-0.3-0.7-0.8-1.1-1.5-1.1h-0.1c-0.7,0-1.2,0.4-1.5,1.1l-5.3,12.7 c-0.1,0.2-0.2,0.4-0.2,0.6c0,0.7,0.5,1.3,1.2,1.3c0.5,0,1-0.3,1.2-0.9l1.2-3h7l1.2,2.9c0.2,0.6,0.6,0.9,1.2,0.9 C106.8,179.6,107.3,179,107.3,178.3z M121.8,169c0-1.3-0.4-2.5-1.2-3.3c-0.9-1-2.3-1.5-4.1-1.5h-5.1c-0.7,0-1.3,0.6-1.3,1.4v12.8 c0,0.7,0.6,1.3,1.3,1.3c0.7,0,1.3-0.6,1.3-1.3v-4.1h3.2l3.5,4.8c0.3,0.4,0.7,0.7,1.2,0.7c0.6,0,1.2-0.5,1.2-1.3 c0-0.4-0.2-0.7-0.4-1l-2.8-3.7C120.4,173,121.8,171.5,121.8,169L121.8,169z M135.6,165.4c0-0.7-0.5-1.3-1.2-1.3h-9.6 c-0.7,0-1.2,0.6-1.2,1.3c0,0.7,0.5,1.3,1.2,1.3h3.5v11.6c0,0.7,0.6,1.3,1.3,1.3c0.7,0,1.3-0.6,1.3-1.3v-11.6h3.5 C135,166.6,135.6,166.1,135.6,165.4z M148,175.1c0-2.5-1.6-3.7-4.6-4.5c-2.8-0.7-3.4-1.2-3.4-2.4v0c0-1,0.9-1.8,2.3-1.8 c1.1,0,2.2,0.4,3.3,1.2c0.2,0.1,0.4,0.2,0.7,0.2c0.7,0,1.2-0.5,1.2-1.3c0-0.5-0.3-0.9-0.6-1.1c-1.3-0.9-2.8-1.4-4.6-1.4 c-2.9,0-4.9,1.8-4.9,4.5v0c0,2.8,1.7,3.8,4.8,4.6c2.7,0.7,3.2,1.3,3.2,2.3v0c0,1.1-1,1.9-2.5,1.9c-1.6,0-2.8-0.6-4-1.6 c-0.2-0.1-0.4-0.2-0.7-0.2c-0.7,0-1.2,0.5-1.2,1.3c0,0.4,0.2,0.8,0.5,1c1.6,1.3,3.5,1.9,5.4,1.9C145.9,179.7,148,178,148,175.1 L148,175.1z M148.6,135.4l2.3,1.8c4.2,3.3,9.2,4.5,14.4,4.5c6.7,0,12.6-2.4,17.4-7.4c4.6-4.8,7.2-10.6,7.2-17.6 c0-5.1-1.7-9.7-4.2-13.9c-1.6-2.7-3.8-5.2-5.9-7.4c-2.9-3-6.1-5.7-9.3-8.2c-2.5-1.9-4.9-3.9-7.3-5.9c-0.8-0.6-1.5-1.2-2.2-1.9 c-0.4-0.4-0.9-0.8-1.3-1.2c-1.5-1.7-3.1-3.7-4.1-5.8c-0.7-1.7-1.1-3.5-1.1-5.4c0-3,1-5.5,3-7.6c2.2-2.2,4.9-3.1,7.9-3.1 c2.5,0,4.8,0.7,7,2.1c0.5,0.3,1,0.7,1.5,1.1l0.1,0.1l6,5.2l0.2,0.1c0.7,0.3,1.4,0.5,2.1,0.5c2.8,0,5-2.4,5-5.4 c0-1.2-0.4-2.3-1.1-3.3l0-0.1l-0.4-0.5c-0.1-0.1-0.3-0.2-0.4-0.4l-5.6-5.2l0,0c-0.8-0.7-1.7-1.3-2.6-1.9c-3.6-2.2-7.4-3.3-11.5-3.3 c-3.8,0-7.4,0.9-10.7,2.9c-3.2,1.9-5.8,4.5-7.7,7.9c-1.9,3.4-2.7,7.2-2.7,11.1c0,5.3,1.6,10,4.6,14.2c0.5,0.8,1.2,1.6,1.9,2.3 c0.9,1,1.9,1.9,2.8,2.8c2.8,2.6,5.7,5,8.6,7.4c3,2.4,6,5,8.8,7.8c2,2,4,4.2,5.5,6.5c1.7,2.5,2.8,5.4,2.8,8.5c0,2.6-0.6,5-1.9,7.2 c-1.3,2.4-3.2,4.1-5.4,5.4c-2.4,1.4-5,2-7.7,2c-3.9,0-7.3-1.9-10.2-4.4l-14.4-12.7l-2.4-2.1c-0.7-0.5-1.6-0.8-2.5-0.8 c-2.5,0-4.5,2.1-4.5,4.8c0,1.1,0.3,2.1,0.9,2.9c0.4,0.5,0.8,0.9,1.3,1.4L148.6,135.4z M165.4,171.8c0-4.3-3.1-7.9-7.5-7.9 c-4.4,0-7.5,3.6-7.5,7.9v0c0,4.3,3.1,7.9,7.5,7.9C162.2,179.8,165.4,176.1,165.4,171.8L165.4,171.8z M179.2,165.4 c0-0.7-0.5-1.2-1.2-1.2h-8.4c-0.7,0-1.3,0.6-1.3,1.4v12.8c0,0.7,0.6,1.3,1.3,1.3c0.7,0,1.3-0.6,1.3-1.3v-5h6.2 c0.6,0,1.2-0.5,1.2-1.2c0-0.7-0.5-1.2-1.2-1.2H171v-4.2h7.1C178.7,166.6,179.2,166,179.2,165.4z M192.7,165.4 c0-0.7-0.5-1.3-1.2-1.3h-9.6c-0.7,0-1.2,0.6-1.2,1.3c0,0.7,0.5,1.3,1.2,1.3h3.5v11.6c0,0.7,0.6,1.3,1.3,1.3c0.7,0,1.3-0.6,1.3-1.3 v-11.6h3.5C192.1,166.6,192.7,166.1,192.7,165.4z M116.2,166.6h-3.7v5.2h3.7c1.8,0,3-1,3-2.6v0 C119.2,167.5,118.1,166.6,116.2,166.6z M97.7,173.4h5.1l-2.5-6.2L97.7,173.4z M68.4,166.4c-2.9,0-4.8,2.4-4.8,5.4v0 c0,3,2,5.4,4.9,5.4c0.9,0,1.8-0.3,2.5-0.7l-1.8-1.6c-0.3-0.3-0.5-0.6-0.5-1.1c0-0.7,0.5-1.3,1.2-1.3c0.4,0,0.6,0.1,0.9,0.4l1.8,1.8 c0.5-0.8,0.7-1.8,0.7-2.9v0C73.3,168.8,71.2,166.4,68.4,166.4z",
        "down": "M162.7,207.8L162.7,207.8c0,3-2,5.4-4.8,5.4 c-2.9,0-4.9-2.5-4.9-5.4v0c0-3,2-5.4,4.8-5.4C160.7,202.4,162.7,204.8,162.7,207.8z M234,154.6L234,154.6c0,1.1,0,2.2,0,3.2 c0,64.6-49,117-109.5,117S15,222.5,15,157.9C15,93.3,64.1,40.9,124.6,40.9c22.3,0,82.4-0.1,109.4-9.1V154.6z M56.7,135.8 c1.5,12.6,7.7,24,17.1,31.7c4.6,3.8,9.8,6.6,15.4,8.2c5.8,1.7,11.8,2.2,17.7,1.4c6.1-0.8,11.9-3,17.1-6.3l0,0l0,0 c0.3-0.2,0.6-0.3,0.9-0.3c0.4,0,0.8,0.2,1.1,0.5l0,0l5.9,5.3l1.4,1.1c0.6,0.3,1.2,0.4,1.8,0.4c2.5,0,4.5-2.1,4.5-4.8 c0-1.1-0.3-2.1-0.9-2.9c-0.3-0.3-0.5-0.6-0.8-0.9l-10.4-9.5l-0.4-0.3c-0.8-0.4-1.6-0.6-2.5-0.6c-1,0-2,0.3-2.9,0.9l0,0l0,0 c-0.2,0.1-0.3,0.2-0.5,0.4c-1.1,0.7-2.1,1.5-3.2,2.2l-0.2,0.1c-3.8,2.2-8,3.7-12.3,4.3c-4.6,0.6-9.3,0.3-13.8-1.1 c-4.3-1.3-8.4-3.5-12-6.4c-7.3-6.1-12.1-14.9-13.3-24.7c-0.6-4.9-0.3-10,1-14.8c1.2-4.6,3.3-9,6-12.8c5.7-7.9,13.9-13,23.2-14.2 c4.6-0.6,9.3-0.3,13.8,1.1c4.3,1.3,8.4,3.5,12,6.4c7.4,6.1,12.1,14.9,13.3,24.7c0.4,3.4,0.4,6.8-0.1,10.2l0,0.1l-0.3,2.1 c-0.4,2.9,1.5,5.6,4.2,6c2.7,0.4,5.2-1.6,5.6-4.5l0.3-2c0.1-0.4,0.1-0.9,0.2-1.3c0.4-3.9,0.4-7.9,0-11.8 c-1.5-12.6-7.7-24-17.1-31.8c-4.6-3.8-9.8-6.6-15.4-8.2c-5.8-1.7-11.8-2.2-17.7-1.4c-11.8,1.6-22.4,8.2-29.7,18.3 c-3.5,4.9-6.2,10.5-7.7,16.4C56.3,123,55.9,129.4,56.7,135.8z M75.9,207.8c0-4.3-3.1-7.9-7.5-7.9c-4.4,0-7.5,3.6-7.5,7.9v0 c0,4.3,3.1,7.9,7.5,7.9c1.7,0,3.2-0.5,4.4-1.5l1,1c0.2,0.2,0.5,0.4,0.9,0.4c0.7,0,1.2-0.6,1.2-1.3c0-0.5-0.2-0.8-0.5-1.1l-0.9-0.8 C75.4,211.2,75.9,209.6,75.9,207.8L75.9,207.8z M91,201.4c0-0.7-0.6-1.3-1.3-1.3c-0.7,0-1.3,0.6-1.3,1.3v7.6c0,2.8-1.4,4.3-3.6,4.3 c-2.3,0-3.6-1.5-3.6-4.4v-7.5c0-0.7-0.6-1.3-1.3-1.3c-0.7,0-1.3,0.6-1.3,1.3v7.6c0,4.5,2.4,6.8,6.1,6.8c3.8,0,6.2-2.3,6.2-6.9 V201.4z M107.3,214.3c0-0.2,0-0.4-0.1-0.6l-5.3-12.7c-0.3-0.7-0.8-1.1-1.5-1.1h-0.1c-0.7,0-1.2,0.4-1.5,1.1l-5.3,12.7 c-0.1,0.2-0.2,0.4-0.2,0.6c0,0.7,0.5,1.3,1.2,1.3c0.5,0,1-0.3,1.2-0.9l1.2-3h7l1.2,2.9c0.2,0.6,0.6,0.9,1.2,0.9 C106.8,215.6,107.3,215,107.3,214.3z M121.8,205c0-1.3-0.4-2.5-1.2-3.3c-0.9-1-2.3-1.5-4.1-1.5h-5.1c-0.7,0-1.3,0.6-1.3,1.4v12.8 c0,0.7,0.6,1.3,1.3,1.3c0.7,0,1.3-0.6,1.3-1.3v-4.1h3.2l3.5,4.8c0.3,0.4,0.7,0.7,1.2,0.7c0.6,0,1.2-0.5,1.2-1.3 c0-0.4-0.2-0.7-0.4-1l-2.8-3.7C120.4,209,121.8,207.5,121.8,205L121.8,205z M135.6,201.4c0-0.7-0.5-1.3-1.2-1.3h-9.6 c-0.7,0-1.2,0.6-1.2,1.3c0,0.7,0.5,1.3,1.2,1.3h3.5v11.6c0,0.7,0.6,1.3,1.3,1.3c0.7,0,1.3-0.6,1.3-1.3v-11.6h3.5 C135,202.6,135.6,202.1,135.6,201.4z M148,211.1c0-2.5-1.6-3.7-4.6-4.5c-2.8-0.7-3.4-1.2-3.4-2.4v0c0-1,0.9-1.8,2.3-1.8 c1.1,0,2.2,0.4,3.3,1.2c0.2,0.1,0.4,0.2,0.7,0.2c0.7,0,1.2-0.5,1.2-1.3c0-0.5-0.3-0.9-0.6-1.1c-1.3-0.9-2.8-1.4-4.6-1.4 c-2.9,0-4.9,1.8-4.9,4.5v0c0,2.8,1.7,3.8,4.8,4.6c2.7,0.7,3.2,1.3,3.2,2.3v0c0,1.1-1,1.9-2.5,1.9c-1.6,0-2.8-0.6-4-1.6 c-0.2-0.1-0.4-0.2-0.7-0.2c-0.7,0-1.2,0.5-1.2,1.3c0,0.4,0.2,0.8,0.5,1c1.6,1.3,3.5,1.9,5.4,1.9C145.9,215.7,148,214,148,211.1 L148,211.1z M148.6,171.4l2.3,1.8c4.2,3.3,9.2,4.5,14.4,4.5c6.7,0,12.6-2.4,17.4-7.4c4.6-4.8,7.2-10.6,7.2-17.6 c0-5.1-1.7-9.7-4.2-13.9c-1.6-2.7-3.8-5.2-5.9-7.4c-2.9-3-6.1-5.7-9.3-8.2c-2.5-1.9-4.9-3.9-7.3-5.9c-0.8-0.6-1.5-1.2-2.2-1.9 c-0.4-0.4-0.9-0.8-1.3-1.2c-1.5-1.7-3.1-3.7-4.1-5.8c-0.7-1.7-1.1-3.5-1.1-5.4c0-3,1-5.5,3-7.6c2.2-2.2,4.9-3.1,7.9-3.1 c2.5,0,4.8,0.7,7,2.1c0.5,0.3,1,0.7,1.5,1.1l0.1,0.1l6,5.2l0.2,0.1c0.7,0.3,1.4,0.5,2.1,0.5c2.8,0,5-2.4,5-5.4 c0-1.2-0.4-2.3-1.1-3.3l0-0.1l-0.4-0.5c-0.1-0.1-0.3-0.2-0.4-0.4l-5.6-5.2l0,0c-0.8-0.7-1.7-1.3-2.6-1.9c-3.6-2.2-7.4-3.3-11.5-3.3 c-3.8,0-7.4,0.9-10.7,2.9c-3.2,1.9-5.8,4.5-7.7,7.9c-1.9,3.4-2.7,7.2-2.7,11.1c0,5.3,1.6,10,4.6,14.2c0.5,0.8,1.2,1.6,1.9,2.3 c0.9,1,1.9,1.9,2.8,2.8c2.8,2.6,5.7,5,8.6,7.4c3,2.4,6,5,8.8,7.8c2,2,4,4.2,5.5,6.5c1.7,2.5,2.8,5.4,2.8,8.5c0,2.6-0.6,5-1.9,7.2 c-1.3,2.4-3.2,4.1-5.4,5.4c-2.4,1.4-5,2-7.7,2c-3.9,0-7.3-1.9-10.2-4.4l-14.4-12.7l-2.4-2.1c-0.7-0.5-1.6-0.8-2.5-0.8 c-2.5,0-4.5,2.1-4.5,4.8c0,1.1,0.3,2.1,0.9,2.9c0.4,0.5,0.8,0.9,1.3,1.4L148.6,171.4z M165.4,207.8c0-4.3-3.1-7.9-7.5-7.9 c-4.4,0-7.5,3.6-7.5,7.9v0c0,4.3,3.1,7.9,7.5,7.9C162.2,215.8,165.4,212.1,165.4,207.8L165.4,207.8z M179.2,201.4 c0-0.7-0.5-1.2-1.2-1.2h-8.4c-0.7,0-1.3,0.6-1.3,1.4v12.8c0,0.7,0.6,1.3,1.3,1.3c0.7,0,1.3-0.6,1.3-1.3v-5h6.2 c0.6,0,1.2-0.5,1.2-1.2c0-0.7-0.5-1.2-1.2-1.2H171v-4.2h7.1C178.7,202.6,179.2,202,179.2,201.4z M192.7,201.4 c0-0.7-0.5-1.3-1.2-1.3h-9.6c-0.7,0-1.2,0.6-1.2,1.3c0,0.7,0.5,1.3,1.2,1.3h3.5v11.6c0,0.7,0.6,1.3,1.3,1.3c0.7,0,1.3-0.6,1.3-1.3 v-11.6h3.5C192.1,202.6,192.7,202.1,192.7,201.4z M116.2,202.6h-3.7v5.2h3.7c1.8,0,3-1,3-2.6v0 C119.2,203.5,118.1,202.6,116.2,202.6z M97.7,209.4h5.1l-2.5-6.2L97.7,209.4z M68.4,202.4c-2.9,0-4.8,2.4-4.8,5.4v0 c0,3,2,5.4,4.9,5.4c0.9,0,1.8-0.3,2.5-0.7l-1.8-1.6c-0.3-0.3-0.5-0.6-0.5-1.1c0-0.7,0.5-1.3,1.2-1.3c0.4,0,0.6,0.1,0.9,0.4l1.8,1.8 c0.5-0.8,0.7-1.8,0.7-2.9v0C73.3,204.8,71.2,202.4,68.4,202.4z"
    };

    var droplet = output.path(contours.normal).attr({ "stroke": "#fff", "stroke-width": "0.5px", "fill": "R(75, 120, 90)#fbb-#f00" });
    //var droplet = output.path(contours.normal).attr({"stroke" : "#fff", "stroke-width" : "0.5px", "fill" : "red"});

    var upAnimationInAction = false;
    var downAnimationInAction = false;

    function scrollUp() {
        output.stop().attr({ "shape-rendering": "optimizeSpeed" });
        droplet.stop().animate({ "d": contours.up }, animTime, mina.easeout);
        //droplet.attr({"d": contours.up});
    }

    function scrollDown() {
        output.attr({ "shape-rendering": "optimizeSpeed" });
        droplet.stop().animate({ "d": contours.down }, animTime, mina.easeout);
        //droplet.stop().attr({"d": contours.down});
    }

    function backing() {
        droplet.stop().animate({ "d": contours.normal }, animTime, mina.easein, function () {
            downAnimationInAction = false;
            upAnimationInAction = false;
            output.attr({ "shape-rendering": "auto" });
        });
    }

    var setNormalState = function setNormalState() {
        //console.log("setNormalState FIRED");
        backing();
    };

    var currentScroll = window.pageYOffset || document.documentElement.scrollTop;
    var scrollTimer;

    function scroll_handler() {

        clearTimeout(scrollTimer);
        scrollTimer = setTimeout(function () {
            setNormalState();
        }, 300);

        var scrolled = window.pageYOffset || document.documentElement.scrollTop;
        var delta = scrolled - currentScroll;

        if (delta > 0 && !downAnimationInAction) {
            downAnimationInAction = true;
            upAnimationInAction = false;
            scrollDown();
        }
        if (delta < 0 && !upAnimationInAction) {
            upAnimationInAction = true;
            downAnimationInAction = false;
            scrollUp();
        }
        currentScroll = scrolled;
    };

    window.addEventListener("scroll", scroll_handler);
} //end of init function